(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t){},138:function(e,t,a){e.exports=a.p+"static/media/bg.6dd57ac5.jpg"},142:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(19),c=a.n(s),r=(a(75),a(4)),i=a(5),l=a(7),m=a(6),h=a(8),p=a(11),u=(a(77),a(152)),d=a(151),g=a(66),f=a.n(g).a.create({baseURL:"https://beentogether.herokuapp.com",withCredentials:!0}),v={rootPath:"https://beentogether.herokuapp.com"},E=(a(97),a(25)),b=a.n(E),y=a(41),k=a(143),N=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={},a.onChangeUsername=function(e){a.setState({username:e.target.value})},a.onChangePassword=function(e){a.setState({password:e.target.value})},a.login=function(){a.props.onLogin(a.state.username,a.state.password)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"login"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"login-container f-main"},o.a.createElement("div",{className:"form-banner"},o.a.createElement("div",{className:"snow"}),o.a.createElement("div",{className:"snow"}),o.a.createElement("div",{className:"snow"}),o.a.createElement("div",{className:"snow"})),o.a.createElement("div",{class:"form",ref:function(t){return e.divRef=t}},o.a.createElement("div",{className:"login-title"},o.a.createElement("a",{className:"logo f-heading",href:"/"},o.a.createElement("i",{className:"fas fa-heartbeat"}),"lovebeat"),o.a.createElement("p",null,"\u0110\u0103ng nh\u1eadp")),o.a.createElement("div",{className:"main-form"},o.a.createElement("div",{className:"username-container"},o.a.createElement("label",null,"T\xean t\xe0i kho\u1ea3n"),o.a.createElement("input",{onChange:this.onChangeUsername,type:"text",name:"username",placeholder:"T\xean t\xe0i kho\u1ea3n",required:!0})),o.a.createElement("div",{className:"password-container"},o.a.createElement("label",null,"M\u1eadt kh\u1ea9u"),o.a.createElement("input",{onChange:this.onChangePassword,type:"password",name:"password",placeholder:"M\u1eadt kh\u1ea9u",required:!0})),o.a.createElement("p",{style:{color:"red"}},this.props.notiLogin),o.a.createElement("div",{className:"submit-container"},o.a.createElement("button",{onClick:this.login},"\u0110\u0103ng nh\u1eadp"))),o.a.createElement("div",{className:"footer-form"},o.a.createElement("p",null,"B\u1ea1n ch\u01b0a c\xf3 t\xe0i kho\u1ea3n?",o.a.createElement(k.a,{to:"/signup",className:"open-signup"},"\u0110\u0103ng k\xfd")))))))}}]),t}(n.Component),O=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.updateHeight("bannerHeight",this.divRef.clientHeight)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"banner",ref:function(t){return e.divRef=t}},o.a.createElement("div",{className:"bg-wave"}),o.a.createElement("div",{className:"snow"}),o.a.createElement("div",{className:"snow"}),o.a.createElement("div",{className:"snow"}),o.a.createElement("div",{className:"snow"}))}}]),t}(n.Component),C=a(147),j=a(148),S=a(149),w=a(150),Y=a(20),T=a.n(Y),M=a(3),D=a.n(M),I=a(153),P=a(144),x=a(145),A=a(146),L=a(137),H=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).handleComment=function(e){if("Enter"===e.key){var t=b()(v.rootPath);f.post("/api/posts/".concat(a.props.post._id,"/comment"),{content:e.target.value}).then(function(e){t.emit("postId",a.props.post._id),a.props.checkModalPost()}).catch(function(e){return console.log(e)}),e.target.value=""}},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container comment-post-input"},o.a.createElement("textarea",{onKeyPress:this.handleComment,className:"col",placeholder:"B\xecnh lu\u1eadn"}))}}]),t}(n.Component),_=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.checkModalPost()}},{key:"render",value:function(){var e=D()().format("hh:mm:ss a"),t=D()("".concat(this.props.post.createdAt)).format("hh:mm:ss a"),a=D.a.duration(D()("".concat(e),"hh:mm:ss a").diff(D()("".concat(t),"hh:mm:ss a"))),n=parseInt(a.asHours()),s=parseInt(a.asMinutes())%60,c=D()("".concat(this.props.post.createdAt)).format("MM-DD-YYYY"),r=D()().format("MM-DD-YYYY"),i=D()("".concat(r)).diff("".concat(c),"days"),l=this.props.post.imageUrl?o.a.createElement("div",{className:"container post-content-img"},o.a.createElement("p",null,this.props.post.description),o.a.createElement("img",{className:"col",src:"".concat(v.rootPath).concat(this.props.post.imageUrl),alt:"imagepost"})):o.a.createElement("div",{className:"container post-content-noimg"},o.a.createElement("p",null,this.props.post.content)),m=this.props.post.createdBy?o.a.createElement("div",{className:"post-info"},o.a.createElement("div",null,o.a.createElement(k.a,{to:"/".concat(this.props.post.createdBy._id,"/profile")},o.a.createElement("img",{src:this.props.post.createdBy.contentType?"".concat(v.rootPath,"/api/users/").concat(this.props.post.createdBy._id,"/avatar"):T.a,alt:"avatar"}))),o.a.createElement("div",null,o.a.createElement("p",null,this.props.post.createdBy.username),o.a.createElement("p",null,0===i?0!==n?" ".concat(n,":").concat(s," ph\xfat tr\u01b0\u1edbc"):"".concat(s," ph\xfat tr\u01b0\u1edbc"):1===i?"H\xf4m qua l\xfac "+" ".concat(t):D()("".concat(this.props.post.createdAt)).format("DD-MM-YYYY")+" l\xfac ".concat(t)))):"",h=this.props.post.comments?this.props.post.comments.map(function(e){return o.a.createElement("div",{className:"container comment-author",key:e._id},o.a.createElement(k.a,{to:"/".concat(e.createdBy._id,"/profile")},o.a.createElement("img",{src:e.createdBy.contentType?"".concat(v.rootPath,"/api/users/").concat(e.createdBy._id,"/avatar"):T.a,alt:"avatar"})),o.a.createElement("span",null,o.a.createElement("h4",null,e.createdBy.username," ")),o.a.createElement("span",null,o.a.createElement("p",null,e.content)))}):"";return o.a.createElement("div",null,o.a.createElement(I.a,{isOpen:this.props.modal,toggle:this.props.toggle,className:this.props.className},o.a.createElement(P.a,{toggle:this.props.toggle},m),o.a.createElement(x.a,null,l,h,o.a.createElement(H,{post:this.props.post,checkModalPost:this.props.checkModalPost})),o.a.createElement(A.a,null,o.a.createElement(L.a,{color:"secondary",onClick:this.props.toggle},"H\u1ee7y"))))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleLogout=function(){f.delete("/api/auth").then(function(e){return a.props.onLogout()}).catch(function(e){return console.log(e)})},a.checkModalPost=function(){f.get("/api/posts/".concat(a.state.post._id)).then(function(e){a.setState({post:e.data})}).catch(function(e){return console.log(e)})},a.state={dropdownOpen:!1,modal:!1,post:"",notiNumber:0},a.toggle1=a.toggle1.bind(Object(p.a)(Object(p.a)(a))),a.toggle=a.toggle.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("posts",function(t){e.props.rela?e.props.rela.inRelationship.map(function(a){a._id===e.props.id&&e.setState({posts:t.slice(Math.max(t.length-5,1))})}):console.log(" ")}),f.get("/api/relationships/getPostOfRela").then(function(t){var a=t.data.slice(Math.max(t.data.length-5,1));e.setState({posts:a})}).catch(function(e){return console.log(e)})}},{key:"toggle",value:function(e){var t=this;this.setState({modal:!this.state.modal,postId:e.target.id}),f.get("/api/posts/".concat(e.target.id)).then(function(e){t.setState({post:e.data})}).catch(function(e){return console.log(e)})}},{key:"toggle1",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"render",value:function(){var e=this.state.posts?this.state.posts.map(function(e,t){var a=D()().format("hh:mm:ss a"),n=D()("".concat(e.createdAt)).format("hh:mm:ss a"),s=D.a.duration(D()("".concat(a),"hh:mm:ss a").diff(D()("".concat(n),"hh:mm:ss a"))),c=parseInt(s.asHours()),r=parseInt(s.asMinutes())%60,i=D()("".concat(e.createdAt)).format("MM-DD-YYYY"),l=D()().format("MM-DD-YYYY"),m=D()("".concat(l)).diff("".concat(i),"days");return o.a.createElement("div",{id:e._id,className:"post-noti"},o.a.createElement("img",{id:e._id,className:"ava",alt:"avatar",src:e.createdBy.contentType?"".concat(v.rootPath,"/api/users/").concat(e.createdBy._id,"/avatar"):T.a}),o.a.createElement("div",{id:e._id},o.a.createElement("p",{id:e._id},"\u0110\xe3 th\xeam k\u1ec9 ni\u1ec7m m\u1edbi"),o.a.createElement("span",null,o.a.createElement("img",{id:e._id,className:"content",alt:"",src:e.imageUrl?"".concat(v.rootPath).concat(e.imageUrl):""})),o.a.createElement("p",{id:e._id},0===m?0!==c?" ".concat(c,":").concat(r," ph\xfat tr\u01b0\u1edbc"):"".concat(r," ph\xfat tr\u01b0\u1edbc"):1===m?"H\xf4m qua l\xfac "+" ".concat(n):D()("".concat(e.createdAt)).format("DD-MM-YYYY")+" l\xfac ".concat(n))))}):"";return o.a.createElement("div",null,o.a.createElement("header",{style:{background:this.props.headerColor}},o.a.createElement("div",{className:"container"},o.a.createElement(k.a,{className:"logo f-heading",to:"/"},o.a.createElement("i",{className:"fas fa-heartbeat"}),"lovebeat"),o.a.createElement("nav",null,o.a.createElement("ul",{className:"f-main"},o.a.createElement("li",null,o.a.createElement("a",{className:this.props.homeActive,id:"love-home-nav",href:"#love-home"},"LoveHome")),o.a.createElement("li",null,o.a.createElement("div",null,o.a.createElement("a",{className:this.props.spaceActive,id:"love-space-nav",href:"#love-space"},"LoveSpace"))),o.a.createElement("li",null,o.a.createElement("a",{className:this.props.diaryActive,id:"love-diary-nav",href:"#love-diary"},"LoveDiary")),o.a.createElement("li",null,o.a.createElement(C.a,{direction:"left",isOpen:this.state.dropdownOpen,toggle:this.toggle1},o.a.createElement(j.a,{color:"none"},o.a.createElement("p",{style:{color:"#ffffff"}},"LoveNotify",o.a.createElement("span",{style:{color:"red",fontWeight:"bold"}}," ",0!==this.state.notiNumber?this.state.notiNumber:""))),o.a.createElement(S.a,null,o.a.createElement(w.a,{onClick:this.toggle},e[4]),o.a.createElement(w.a,{divider:!0}),o.a.createElement(w.a,{onClick:this.toggle},e[3]),o.a.createElement(w.a,{divider:!0}),o.a.createElement(w.a,{onClick:this.toggle},e[2]),o.a.createElement(w.a,{divider:!0}),o.a.createElement(w.a,{onClick:this.toggle},e[1]),o.a.createElement(w.a,{divider:!0}),o.a.createElement(w.a,{onClick:this.toggle},e[0]))),o.a.createElement(_,{checkModalPost:this.checkModalPost,post:this.state.post,toggle:this.toggle,modal:this.state.modal})),o.a.createElement("li",null,o.a.createElement("button",null,"LoveCalendar")),o.a.createElement("li",{onClick:this.handleLogout},o.a.createElement("button",null,"LogOut")))))))}}]),t}(n.Component),R=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleCreate=function(e){a.setState({startTime:e.target.value})},a.handleJoin=function(e){a.setState({relaId:e.target.value})},a.handleButtonCreate=function(){!a.state.startTime||a.state.relaId?a.setState({noti:"Nh\u1eadp Sai ho\u1eb7c Thi\u1ebfu",startTime:"",relaId:""}):D()(a.state.startTime).diff(a.state.curTime,"days")<0?f.post("/api/relationships",{startTime:a.state.startTime}).then(function(e){a.props.toggle(),a.props.onCheckRela(),a.props.onCheckCreate()}).catch(function(e){return console.log(e)}):a.setState({noti:"ng\xe0y c\u1ee7a t\u01b0\u01a1ng lai... :(",startTime:""})},a.handleButtonJoin=function(){a.state.startTime||!a.state.relaId?a.setState({noti:"Nh\u1eadp Sai ho\u1eb7c Thi\u1ebfu",startTime:"",relaId:""}):a.state.relaId?f.put("/api/relationships",{relaId:a.state.relaId}).then(function(e){a.props.toggle(),a.props.onCheckRela(),a.props.onCheckCreate()}).catch(function(e){return a.setState({noti:"ID kh\xf4ng t\u1ed3n t\u1ea1i",relaId:""})}):console.log("Kh\xf4ng c\xf3 RelationshipID")},a.state={startTime:"",relaId:"",curTime:D()().format("YYYY-MM-DD")},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(I.a,{isOpen:this.props.modal,toggle:this.props.toggle,className:this.props.className},o.a.createElement(P.a,{toggle:this.props.toggle,className:"f-main"},"T\u1ea1o ho\u1eb7c tham gia"),o.a.createElement(x.a,null,o.a.createElement("div",{className:"create-row"},o.a.createElement("p",null,"T\u1ea1o m\u1edbi"),o.a.createElement("input",{type:"date",onChange:this.handleCreate,value:this.state.startTime})),o.a.createElement("div",{className:"join-row"},o.a.createElement("p",null,"Tham gia"),o.a.createElement("input",{type:"text",onChange:this.handleJoin,value:this.state.relaId,placeholder:"Nh\u1eadp ID"})),o.a.createElement("p",{className:"noti-new-rela"},this.state.noti?this.state.noti:"")),o.a.createElement(A.a,null,o.a.createElement(L.a,{className:"create-button f-main btn btn-sm btn-info text-light",onClick:this.handleButtonCreate},"T\u1ea1o m\u1edbi")," ",o.a.createElement(L.a,{className:"join-button f-main btn btn-sm btn-danger text-light",onClick:this.handleButtonJoin},"Tham gia")))))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).onCheckRela=function(){f.get("/api/relationships/getRelaForUser").then(function(e){a.setState({data:e.data}),a.setState({startTime:e.data.startTime}),a.setState({curTime:D()()})}).catch(function(e){return console.log(e)})},a.state={modal:!1},a.toggle=a.toggle.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"componentDidMount",value:function(){var e=this;f.get("/api/relationships/getRelaForUser").then(function(t){e.setState({data:t.data}),e.setState({startTime:t.data.startTime}),e.setState({curTime:D()()})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.state.startTime?D()("".concat(this.state.startTime),"YYYY-MM-DD"):console.log("err"),t=D()("".concat(e)),a=D()(t).toArray().slice(0,3),n=D()("".concat(this.state.startTime),"YYYY-MM-DD").format("MM-DD-YYYY"),s=D()("".concat(this.state.curTime)).diff("".concat(n),"days"),c=s%100,r=s-c+100,i=100-c,l=D()("".concat(this.state.curTime)).add(i,"days").calendar().split("/");return o.a.createElement("div",{id:"love-home",className:"f-main"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"love-home1"},this.state.data?o.a.createElement("div",{className:"balloon"},o.a.createElement("p",{className:"now-count"},s),o.a.createElement("p",{className:"coming-count"},"+",i),o.a.createElement("div",{className:"heart-beat"},o.a.createElement("i",{className:"fas fa-burn"}))):""),o.a.createElement("div",{className:"love-home2"},this.state.data?o.a.createElement("div",{className:"balloon"},o.a.createElement("p",{className:"start-time"},"Ng\xe0y ",a[2]," thg ",a[1]+1,","," ",a[0])):"",this.state.data?o.a.createElement("div",{className:"balloon"},o.a.createElement("p",{className:"coming"},r," Anniversary"),o.a.createElement("p",{className:"coming-day"},"Ng\xe0y ",l[1]," thg ",l[0],", ",l[2])):"")),this.props.rela?"":o.a.createElement("div",{className:"open-new-rela f-main"},o.a.createElement("button",{onClick:this.toggle,className:"f-main"},"T\u1ea1o ho\u1eb7c Tham gia v\xe0o m\u1ed9t m\u1ed1i quan h\u1ec7"),o.a.createElement(R,{onCheckCreate:this.props.onCheckCreate,onCheckRela:this.onCheckRela,toggle:this.toggle,modal:this.state.modal})))}}]),t}(n.Component),F=(a(138),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={rela:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.updateSpaceHeight("spaceHeight",this.divRef.clientHeight),f.get("/api/relationships/getRelaForUser").then(function(t){e.setState({rela:t.data}),e.setState({curTime:D()()})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.rela?this.state.rela.inRelationship.map(function(e){return o.a.createElement(k.a,{key:e._id,to:"/".concat(e._id,"/profile")},e.contentType?o.a.createElement("img",{alt:"",src:"".concat(v.rootPath,"/api/users/").concat(e._id,"/avatar")}):o.a.createElement("img",{alt:"",src:T.a}))}):"",a=this.state.rela?this.state.rela.inRelationship.map(function(e){return o.a.createElement("p",null,e.username)}):"",n=D()("".concat(this.state.rela.startTime),"DD-MM-YYYY").format("MM-DD-YYYY"),s=D()("".concat(this.state.curTime)).diff("".concat(n),"days");return o.a.createElement("div",{id:"love-space",ref:function(t){return e.divRef=t}},o.a.createElement("div",{className:"love-title f-main"},o.a.createElement("h1",null,"LoveSpace")),o.a.createElement("div",{className:"container f-main"},o.a.createElement("div",{className:"avatar"},t),o.a.createElement("div",{className:"space-info"},o.a.createElement("div",{className:"user-fullname"},a[0],o.a.createElement("i",{className:"fas fa-heartbeat"}),a[1]),o.a.createElement("div",{className:"space"},o.a.createElement("p",null,s," ng\xe0y y\xeau"),o.a.createElement("p",null,"Online 3 gi\u1edd 40 ph\xfat tr\u01b0\u1edbc")))))}}]),t}(n.Component)),q=a(43),J=a.n(q),K=a(68),W=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={image:null,text:""},a.handleText=function(e){a.setState({text:e.target.value})},a.handleInput=function(e){a.setState({image:e.target.files[0]})},a.handlePost=function(){var e=a.state.image,t=new FormData;t.append("image",e),t.append("description",a.state.text),a.state.image?f.post("/api/posts/image",t).then(function(e){a.props.toggle(),a.props.socket.emit("userId",a.props.id),a.props.onCheckPost()}).catch(function(e){return console.log(e)}):a.state.text||""!==a.state.text?f.post("/api/posts/content",{content:a.state.text}).then(function(e){console.log(e),a.props.toggle(),a.props.socket.emit("userId",a.props.id),a.props.onCheckPost()}).catch(function(e){return console.log(e)}):console.log("Kh\xf4ng \u0111\u1ee7 d\u1eef li\u1ec7u"),a.setState({text:""})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(I.a,{isOpen:this.props.modal,toggle:this.props.toggle,className:this.props.className},o.a.createElement(P.a,{toggle:this.props.toggle,className:"f-main"},"K\u1ec9 ni\u1ec7m"),o.a.createElement(x.a,null,o.a.createElement("div",{id:"create-post-form",className:"f-main"},o.a.createElement("textarea",{onChange:this.handleText,placeholder:"H\xe3y k\u1ec3 m\u1ed9t c\xe2u chuy\u1ec7n",value:this.state.text}),o.a.createElement("input",{className:"f-main",onChange:this.handleInput,type:"file",name:"image",value:""}))),o.a.createElement(A.a,null,o.a.createElement(L.a,{color:"primary",onClick:this.handlePost},"\u0110\u0103ng")," ",o.a.createElement(L.a,{color:"secondary",onClick:this.props.toggle},"H\xf9y"))))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={modal:!1},a.toggle=a.toggle.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"render",value:function(){return o.a.createElement("div",{className:"create-post-container f-main"},o.a.createElement("button",{onClick:this.toggle,className:"create-post-button"},"\u0110\u0103ng k\u1ec9 ni\u1ec7m"),o.a.createElement(W,{socket:this.props.socket,id:this.props.id,onCheckPost:this.props.onCheckPost,toggle:this.toggle,modal:this.state.modal}))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).checkModalPost=function(){f.get("/api/posts/".concat(a.state.post._id)).then(function(e){a.setState({post:e.data})}).catch(function(e){return console.log(e)})},a.onCheckPost=Object(K.a)(J.a.mark(function e(){var t;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get("/api/relationships/getPostOfRela");case 3:t=e.sent,a.setState({data:t.data}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])})),a.state={modal:!1,post:""},a.toggle=a.toggle.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(e){var t=this;this.setState({modal:!this.state.modal,postId:e.target.id}),f.get("/api/posts/".concat(e.target.id)).then(function(e){t.setState({post:e.data})}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("posts",function(t){e.props.rela?e.props.rela.inRelationship.map(function(a){a._id===e.props.id&&e.setState({data:t})}):console.log(" ")}),f.get("/api/relationships/getPostOfRela").then(function(t){e.setState({data:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.data&&this.state.data.length>0?this.state.data.map(function(t){return t.imageUrl?o.a.createElement("div",{onClick:e.toggle,className:"post",key:t._id,id:t._id},o.a.createElement("img",{src:v.rootPath+t.imageUrl,alt:"imgpost",id:t._id}),o.a.createElement("p",{id:t._id},t.description)):o.a.createElement("div",{onClick:e.toggle,className:"post",key:t._id,id:t._id},o.a.createElement("p",{style:{fontFamily:"Pacifico",fontSize:"20px",color:"#aaa"},id:"".concat(t._id)},t.content))}):"";return o.a.createElement("div",{id:"love-diary"},o.a.createElement("div",{className:"love-title f-main"},o.a.createElement("h1",null,"LoveDiary")),o.a.createElement(z,{socket:this.props.socket,id:this.props.id,onCheckPost:this.onCheckPost}),o.a.createElement("div",{className:"container f-main"},t),o.a.createElement(_,{checkModalPost:this.checkModalPost,post:this.state.post,toggle:this.toggle,modal:this.state.modal}))}}]),t}(n.Component),$=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.background?this.props.background:"";return o.a.createElement("div",null,o.a.createElement("footer",{style:{background:e}},o.a.createElement("div",{className:"container f-main"},o.a.createElement("div",{className:"copyright"},"Copyright \xa9 2019 LoveBeat Design by TQH"),o.a.createElement("div",{className:"author-info"},o.a.createElement("div",{className:"box"},o.a.createElement("div",{className:"icon-contact"},o.a.createElement("i",{className:"fas fa-map-marker-alt"}),"Our Location"),o.a.createElement("div",{className:"detail"},"Hanoi")),o.a.createElement("div",{className:"box"},o.a.createElement("div",{className:"icon-contact"},o.a.createElement("i",{className:"fas fa-phone-volume"}),"Call Us"),o.a.createElement("div",{className:"detail"},"+84 969 988 524")),o.a.createElement("div",{className:"box"},o.a.createElement("div",{className:"icon-contact"},o.a.createElement("i",{className:"fas fa-envelope"}),"Write Us"),o.a.createElement("div",{className:"detail"},"beentogether.project"))))))}}]),t}(n.Component),G=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container text-center"},o.a.createElement("div",{class:"lds-hourglass",style:{marginTop:"300px"}}))}}]),t}(n.Component),V=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={background:"rgba(47,59,77,.5)",bannerHeight:0,headerColor:"transparent",homeActive:"",spaceActive:"",diaryActive:"",spaceHeight:0},a.updateHeight=function(e,t){a.setState(Object(y.a)({},e,t))},a.updateSpaceHeight=function(e,t){a.setState(Object(y.a)({},e,t))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",function(){window.scrollY>e.state.bannerHeight-100?e.setState({headerColor:"#2f3b4d"}):e.setState({headerColor:"transparent"}),window.scrollY>0&&window.scrollY<e.state.bannerHeight-100?e.setState({homeActive:"active"}):e.setState({homeActive:""}),window.scrollY>e.state.bannerHeight-100&&window.scrollY<e.state.bannerHeight+e.state.spaceHeight?e.setState({spaceActive:"active"}):e.setState({spaceActive:""}),window.scrollY>e.state.bannerHeight+e.state.spaceHeight?e.setState({diaryActive:"active"}):e.setState({diaryActive:""})})}},{key:"render",value:function(){return o.a.createElement("div",null,this.props.username?o.a.createElement("div",null,this.props.username&&!this.props.loading?o.a.createElement("div",null,o.a.createElement(O,{updateHeight:this.updateHeight}),o.a.createElement(B,{socket:this.props.socket,rela:this.props.rela,id:this.props.id,homeActive:this.state.homeActive,spaceActive:this.state.spaceActive,diaryActive:this.state.diaryActive,headerColor:this.state.headerColor,onLogout:this.props.onLogout}),o.a.createElement(U,{rela:this.props.rela,onCheckCreate:this.props.onCheckCreate}),this.props.rela?o.a.createElement("div",null,o.a.createElement(F,{updateSpaceHeight:this.updateSpaceHeight}),o.a.createElement(Q,{socket:this.props.socket,id:this.props.id,rela:this.props.rela,data:this.state.data})):o.a.createElement("div",{style:{height:"290px"}}),this.props.rela?o.a.createElement($,null):o.a.createElement($,{background:this.state.background})):o.a.createElement(G,null)):o.a.createElement(N,{onLogin:this.props.onLogin,notiLogin:this.props.notiLogin}))}}]),t}(n.Component),X=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={confirm:!1},a.onChangeUsername=function(e){a.setState({username:e.target.value})},a.onChangePassword=function(e){a.setState({password:e.target.value})},a.onChangeEmail=function(e){a.setState({email:e.target.value})},a.onChangePhone=function(e){a.setState({phone:e.target.value})},a.onChangeBirthday=function(e){a.setState({birthday:e.target.value})},a.handleSingup=function(){a.state.username&&a.state.password&&a.state.email&&a.state.phone&&a.state.birthday?f.post("/api/users",{username:a.state.username,password:a.state.password,email:a.state.email,phone:a.state.phone,birthday:D()("".concat(a.state.birthday),"DD-MM-YYYY").format("YYYY-MM-DD")}).then(function(e){a.setState({confirm:!0}),a.props.onCheckSignup(e.data.username,e.data.id)}).catch(function(e){a.setState({noti:"Sai th\xf4ng tin ho\u1eb7c th\xf4ng tin \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u0103ng k\xed"})}):a.setState({noti:"B\u1ea1n nh\u1eadp thi\u1ebfu th\xf4ng tin"})},a.handleButtonFb=function(){a.setState({noti:"\u0110ang b\u1ea3o tr\xec, vui l\xf2ng th\u1eed l\u1ea1i sau :D"})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"signup"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"login-container f-main"},o.a.createElement("div",{className:"form-banner"},o.a.createElement("div",{className:"snow"}),o.a.createElement("div",{className:"snow"}),o.a.createElement("div",{className:"snow"}),o.a.createElement("div",{className:"snow"})),o.a.createElement("div",{class:"form"},o.a.createElement("div",{className:"login-title"},o.a.createElement("a",{className:"logo f-heading",href:"/"},o.a.createElement("i",{className:"fas fa-heartbeat"}),"lovebeat"),o.a.createElement("p",null,"\u0110\u0103ng K\xfd")),o.a.createElement("div",{className:"main-form"},o.a.createElement("div",{className:"row1"},o.a.createElement("div",{className:"username-container"},o.a.createElement("label",null,"T\xean t\xe0i kho\u1ea3n"),o.a.createElement("input",{onChange:this.onChangeUsername,type:"text",name:"username",placeholder:"T\xean t\xe0i kho\u1ea3n",required:!0})),o.a.createElement("div",{className:"password-container"},o.a.createElement("label",null,"M\xe2t kh\u1ea9u"),o.a.createElement("input",{onChange:this.onChangePassword,type:"password",name:"password",placeholder:"M\u1eadt kh\u1ea9u",required:!0}))),o.a.createElement("div",{className:"row2"},o.a.createElement("div",null,o.a.createElement("label",null,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),o.a.createElement("input",{onChange:this.onChangePhone,type:"text",placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",required:!0})),o.a.createElement("div",null,o.a.createElement("label",null,"Ng\xe0y sinh"),o.a.createElement("input",{onChange:this.onChangeBirthday,type:"date",placeholder:"Ng\xe0y sinh",required:!0}))),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("label",null,"Email"),o.a.createElement("input",{onChange:this.onChangeEmail,type:"email",placeholder:"Email",required:!0})),o.a.createElement("p",{style:{color:"red"}},this.state.noti),o.a.createElement("div",{className:"button-signup"},this.state.confirm?o.a.createElement(k.a,{to:"/"},"\u0110\u0103ng nh\u1eadp"):o.a.createElement("button",{onClick:this.handleSingup},"\u0110\u0103ng k\xfd"),o.a.createElement(k.a,{to:"/"},o.a.createElement("button",{style:{width:"20%",marginLeft:"30px"},onClick:this.handleSingup},"Tr\u1edf v\u1ec1"))))),o.a.createElement("div",{className:"footer-form"},o.a.createElement("button",{className:"login-fb",onClick:this.handleButtonFb},"\u0110\u0103ng nh\u1eadp b\u1eb1ng",o.a.createElement("i",{class:"fab fa-facebook-square"}),"Facebook"))))))}}]),t}(n.Component),Z=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={},a.handleInputUsername=function(e){a.setState({username:e.target.value})},a.handleInputEmail=function(e){a.setState({email:e.target.value})},a.handleInputPhone=function(e){a.setState({phone:e.target.value})},a.handleInputBirthday=function(e){console.log(e.target.value),a.setState({birthday:e.target.value})},a.handleInputStartTime=function(e){a.setState({startTime:e.target.value})},a.handleUpdate=function(){f.put("/api/relationships/".concat(a.state.relaId,"/startTime"),{startTime:a.state.startTime}).then(function(e){console.log(e)}).catch(function(e){return console.log(e)}),f.put("/api/users/".concat(a.props.id,"/userInfo"),{username:a.state.username,email:a.state.email,birthday:a.state.birthday,phone:a.state.phone}).then(function(e){a.props.toggle()}).catch(function(e){return console.log(e)})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.get("/api/users/".concat(this.props.id)).then(function(t){e.setState({username:t.data.username,phone:t.data.phone,email:t.data.email,birthday:D()("".concat(t.data.birthday),"YYYY-MM-DD").format("YYYY-MM-DD")})}).catch(function(e){return console.log(e)}),f.get("/api/relationships/getRelaForUser").then(function(t){e.setState({startTime:t.data.startTime,relaId:t.data._id})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(I.a,{isOpen:this.props.modal,toggle:this.props.toggle,className:this.props.className},o.a.createElement(P.a,{toggle:this.props.toggle},"C\u1eadp nh\u1eadt th\xf4ng tin"),o.a.createElement(x.a,null,o.a.createElement("div",{className:"create-row"},o.a.createElement("p",null,"Username"),o.a.createElement("input",{type:"text",onChange:this.handleInputUsername,value:this.state.username})),o.a.createElement("div",{className:"create-row"},o.a.createElement("p",null,"Email"),o.a.createElement("input",{type:"email",onChange:this.handleInputEmail,value:this.state.email})),o.a.createElement("div",{className:"create-row"},o.a.createElement("p",null,"Phone"),o.a.createElement("input",{type:"text",onChange:this.handleInputPhone,value:this.state.phone})),o.a.createElement("div",{className:"create-row"},o.a.createElement("p",null,"Birthday"),o.a.createElement("input",{type:"date",onChange:this.handleInputBirthday,value:this.state.birthday})),o.a.createElement("div",{className:"create-row"},o.a.createElement("p",null,"Start time of Relationship"),o.a.createElement("input",{type:"date",onChange:this.handleInputStartTime,value:this.state.startTime}))),o.a.createElement(A.a,null,o.a.createElement(L.a,{color:"primary",onClick:this.handleUpdate},"L\u01b0u th\xf4ng tin")," ",o.a.createElement(L.a,{color:"secondary",onClick:this.props.toggle},"Cancel"))))}}]),t}(n.Component),ee=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={image:null},a.handleInput=function(e){console.log(e.target.files),a.setState({image:e.target.files[0]})},a.handleAvatar=function(){var e=a.state.image,t=new FormData;t.append("image",e),f.put("/api/users/".concat(a.props.userId,"/avatar"),t).then(function(e){a.props.toggle1()}).catch(function(e){return a.props.toggle1()})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(I.a,{isOpen:this.props.modal1,toggle1:this.props.toggle1,className:this.props.className},o.a.createElement(P.a,{toggle1:this.props.toggle1},"C\u1eadp nh\u1eadt Avatar"),o.a.createElement(x.a,null,o.a.createElement("input",{onChange:this.handleInput,type:"file",name:"image"})),o.a.createElement(A.a,null,o.a.createElement(L.a,{color:"primary",onClick:this.handleAvatar},"C\u1eadp nh\u1eadt")," ",o.a.createElement(L.a,{color:"secondary",onClick:this.props.toggle1},"Cancel"))))}}]),t}(n.Component),te=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={modal:!1,modal1:!1},a.toggle=a.toggle.bind(Object(p.a)(Object(p.a)(a))),a.toggle1=a.toggle1.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(){var e=this;this.setState({modal:!this.state.modal}),f.get("/api/users/".concat(this.props.match.params.id)).then(function(t){e.setState({profile:t.data})}).catch(function(e){return console.log(e)})}},{key:"toggle1",value:function(){var e=this;this.setState({modal1:!this.state.modal1}),f.get("/api/users/".concat(this.props.match.params.id)).then(function(t){e.setState({profile:""}),e.setState({profile:t.data})}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){var e=this;f.get("/api/users/".concat(this.props.match.params.id)).then(function(t){e.setState({profile:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return o.a.createElement("div",{id:"profile"},o.a.createElement("div",{className:"container"},this.state.profile?o.a.createElement("img",{onClick:this.props.userId===this.props.match.params.id?this.toggle1:"",src:this.state.profile.contentType?"".concat(v.rootPath).concat(this.state.profile.avatarUrl):T.a,alt:"avatar"}):"",o.a.createElement(ee,{userId:this.props.userId,toggle1:this.toggle1,modal1:this.state.modal1}),o.a.createElement("div",{className:"profile-info f-main"},o.a.createElement("div",{className:"profile-info-title"},"Th\xf4ng tin c\xe1 nh\xe2n"),o.a.createElement("div",{className:"profile-info-text"},o.a.createElement("div",{className:"info-title"},o.a.createElement("p",null,"Username"),o.a.createElement("p",null,"M\u1eadt kh\u1ea9u"),o.a.createElement("p",null,"Email"),o.a.createElement("p",null,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),o.a.createElement("p",null,"Ng\xe0y sinh"),o.a.createElement("p",null,"ID Relationship")),o.a.createElement("div",{className:"info-detail"},o.a.createElement("p",null,this.state.profile?this.state.profile.username:""),o.a.createElement("p",null,"********"),o.a.createElement("p",null,this.state.profile?this.state.profile.email:""),o.a.createElement("p",null,this.state.profile?this.state.profile.phone:""),o.a.createElement("p",null,this.state.profile?this.state.profile.birthday:""),o.a.createElement("p",null,this.state.profile?this.props.relaId:""))),o.a.createElement("div",{className:"profile-info-button"},this.props.userId===this.props.match.params.id?o.a.createElement("button",{onClick:this.toggle},"C\u1eadp nh\u1eadt"):"",o.a.createElement(Z,{id:this.props.match.params.id,profile:this.state.profile,toggle:this.toggle,modal:this.state.modal}),o.a.createElement(k.a,{to:"/"},o.a.createElement("button",null,"Tr\u1edf v\u1ec1"))))))}}]),t}(n.Component),ae=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).onLogin=function(e,t){a.setState({loading:!0}),f.post("/api/auth",{username:e,password:t}).then(function(e){e?a.setState({username:e.data.username,id:e.data.id}):console.log("sai tai khoan"),f.get("/api/relationships/getRelaForUser").then(function(e){a.setState({rela:e.data}),setTimeout(function(){this.setState({loading:!1})}.bind(Object(p.a)(Object(p.a)(a))),2e3)}).catch(function(e){return console.log(e)})}).catch(function(e){return a.setState({notiLogin:"T\xe0i kho\u1ea3n kh\xf4ng \u0111\xfang"})})},a.onLogout=function(){a.setState({username:null,id:null})},a.onCheckSignup=function(e,t){a.setState({username:e,id:t})},a.onCheckCreate=function(){f.get("/api/relationships/getRelaForUser").then(function(e){a.setState({rela:e.data})}).catch(function(e){return console.log(e)})},a.state={loading:!1},a.socket=b()(v.rootPath),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.socket),this.setState({loading:!0}),f.get("/api/auth/login").then(function(t){e.setState({username:t.data.username,id:t.data.id}),setTimeout(function(){this.setState({loading:!1})}.bind(e),1e3)}).catch(function(e){return console.log(e)}),f.get("/api/relationships/getRelaForUser").then(function(t){e.setState({rela:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return o.a.createElement(u.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(d.a,{exact:!0,path:"/",render:function(t){return o.a.createElement(V,Object.assign({},t,{onLogin:e.onLogin,username:e.state.username,id:e.state.id,rela:e.state.rela,onLogout:e.onLogout,onCheckCreate:e.onCheckCreate,loading:e.state.loading,notiLogin:e.state.notiLogin,socket:e.socket}))}}),o.a.createElement(d.a,{path:"/signup",render:function(t){return o.a.createElement(X,Object.assign({onCheckSignup:e.onCheckSignup},t))}}),o.a.createElement(d.a,{path:"/:id/profile",render:function(t){return o.a.createElement(te,Object.assign({},t,{relaId:e.state.rela?e.state.rela._id:"",userId:e.state.id}))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},20:function(e,t,a){e.exports=a.p+"static/media/avatarDefault.1664fff4.png"},70:function(e,t,a){e.exports=a(142)},75:function(e,t,a){},77:function(e,t,a){}},[[70,2,1]]]);
//# sourceMappingURL=main.fb12f794.chunk.js.map